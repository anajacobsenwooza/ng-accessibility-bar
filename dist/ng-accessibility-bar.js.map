{"version":3,"sources":["ng-accessibility-bar.module.js","ng-accessibility-bar.component.js"],"names":["angular","module","AccessibilityBar","templateUrl","controller","AccessibilityBarComponentController","controllerAs","bindings","contrast","contrastClass","fontAdjust","fontAdjustMaxSize","fontAdjustMinSize","fontAdjustIncrementRate","libras","title","onInit","_setDefaultValues","_verifyContrast","vm","config","class","visibility","incrementRate","maxSize","minSize","_toggleClass","element","classe","$element","document","querySelector","classList","contains","remove","add","localStorage","getItem","setContrast","_getDefaultWindowFontSize","fontSize","window","getComputedStyle","body","getPropertyValue","replace","_adjustFontSize","operator","isInFontSizeLimit","$html","defaultFontSize","setAttribute","increaseFontSize","decreaseFontSize","$body","setItem","this","$onInit","component"],"mappings":"CAAA,WACA,YAEAA,SACAC,OAAA,wBACA,eCLA,WACA,YAKA,SAAAC,KACA,OACAC,YAAA,qCACAC,WAAAC,EACAC,aAAA,KACAC,UACAC,SAAA,IACAC,cAAA,IACAC,WAAA,IACAC,kBAAA,IACAC,kBAAA,IACAC,wBAAA,IACAC,OAAA,IACAC,MAAA,MAMA,QAAAV,KAWA,QAAAW,KACAC,IACAC,EAAAC,EAAAC,QAGA,QAAAH,KACAE,EAAAC,QACAZ,UACAa,QAAAF,EAAAV,eAAA,iBACAa,WAAAH,EAAAX,YAAA,GAEAE,YACAa,cAAAJ,EAAAN,yBAAA,EACAW,QAAAL,EAAAR,mBAAA,GACAc,QAAAN,EAAAP,mBAAA,GACAU,WAAAH,EAAAT,cAAA,GAEAI,QACAQ,WAAAH,EAAAL,UAAA,GAEAC,MAAAI,EAAAJ,OAAA,mBAIA,QAAAW,GAAAC,EAAAC,GACA,GAAAC,GAAAC,SAAAC,cAAAJ,EAEAE,GAAAG,UAAAC,SAAAL,GACAC,EAAAG,UAAAE,OAAAN,GAEAC,EAAAG,UAAAG,IAAAP,GAIA,QAAAV,GAAAE,GACA,SAAAgB,aAAAC,QAAA,2BAAAjB,EAAAZ,SAAAc,YACAgB,EAAAlB,GAIA,QAAAmB,KACA,GAAAC,GAAAC,OAAAC,iBAAAZ,SAAAa,MAAAC,iBAAA,YAIA,OAHAJ,GAAAA,EAAAK,QAAA,MAAA,IACAL,GAAAA,EAKA,QAAAM,GAAAC,GACA,GACAC,GADAC,EAAAnB,SAAAC,cAAA,OAIAiB,GADA,MAAAD,EACAG,EAAA/B,EAAAC,OAAAV,WAAAe,QAEAyB,EAAA/B,EAAAC,OAAAV,WAAAc,QAGAwB,IACA,MAAAD,EAAAG,GAAA/B,EAAAC,OAAAV,WAAAa,cAAA2B,GAAA/B,EAAAC,OAAAV,WAAAa,cACA0B,EAAAE,aAAA,QAAA,cAAAD,EAAA,QAIA,QAAAE,KACAN,EAAA,KAGA,QAAAO,KACAP,EAAA,KAGA,QAAAR,GAAAlB,GACA,GAAAkC,GAAAxB,SAAAC,cAAA,OAEAL,GAAA,OAAAN,EAAAZ,SAAAY,UAEAgB,aAAAmB,QAAA,yBAAAD,EAAAtB,UAAAC,SAAAb,EAAAZ,SAAAY,WAvFA,GAAAD,GAAAqC,KACAN,EAAAX,GAEApB,GAAAC,UAEAD,EAAAsC,QAAAzC,EACAG,EAAAkC,iBAAAA,EACAlC,EAAAiC,iBAAAA,EACAjC,EAAAmB,YAAAA,EA/BAtC,QAAAC,OAAA,wBACAyD,UAAA,mBAAAxD","file":"ng-accessibility-bar.js","sourcesContent":["(function() {\n    'use strict';\n\n    angular\n        .module('ng-accessibility-bar', [\n            'ngTouch'\n        ]);\n}());\n","(function() {\n    'use strict';\n\n    angular.module('ng-accessibility-bar')\n        .component('accessibilityBar', AccessibilityBar());\n\n    function AccessibilityBar() {\n        return {\n            templateUrl: 'ng-accessibility-bar.template.html',\n            controller: AccessibilityBarComponentController,\n            controllerAs: 'vm',\n            bindings:{\n                contrast: '<',\n                contrastClass: '@',\n                fontAdjust: '<',\n                fontAdjustMaxSize: '<',\n                fontAdjustMinSize: '<',\n                fontAdjustIncrementRate: '<',\n                libras: '<',\n                title: '@',\n            }\n        };\n    }\n\n    /* @ngInject */\n    function AccessibilityBarComponentController() {\n        var vm = this,\n            defaultFontSize = _getDefaultWindowFontSize();\n\n        vm.config = {};\n\n        vm.$onInit = onInit;\n        vm.decreaseFontSize = decreaseFontSize;\n        vm.increaseFontSize = increaseFontSize;\n        vm.setContrast = setContrast;\n\n        function onInit() {\n            _setDefaultValues();\n            _verifyContrast(vm.config);\n        }\n\n        function _setDefaultValues() {\n            vm.config = {\n                contrast: {\n                    class: vm.contrastClass || 'color-inverter',\n                    visibility: vm.contrast !== false\n                },\n                fontAdjust: {\n                    incrementRate: vm.fontAdjustIncrementRate || 2,\n                    maxSize: vm.fontAdjustMaxSize || 20,\n                    minSize: vm.fontAdjustMinSize || 16,\n                    visibility: vm.fontAdjust !== false\n                },\n                libras: {\n                    visibility: vm.libras !== false\n                },\n                title: vm.title || 'Acessibilidade:'\n            };\n        }\n\n        function _toggleClass(element, classe) {\n            var $element = document.querySelector(element);\n\n            if ($element.classList.contains(classe)) {\n                $element.classList.remove(classe);\n            } else {\n                $element.classList.add(classe);\n            }\n        }\n\n        function _verifyContrast(config) {\n            if (localStorage.getItem('accessibility-contrast') === 'true' && config.contrast.visibility) {\n                setContrast(config);\n            }\n        }\n\n        function _getDefaultWindowFontSize() {\n            var fontSize = window.getComputedStyle(document.body).getPropertyValue('font-size');\n            fontSize = fontSize.replace(/\\D/g, '');\n            fontSize = +fontSize;\n\n            return fontSize;\n        }\n\n        function _adjustFontSize(operator) {\n            var $html = document.querySelector('html'),\n                isInFontSizeLimit;\n\n            if (operator === '-') {\n                isInFontSizeLimit = defaultFontSize > vm.config.fontAdjust.minSize;\n            } else {\n                isInFontSizeLimit = defaultFontSize < vm.config.fontAdjust.maxSize;\n            }\n\n            if (isInFontSizeLimit) {\n                operator === '+' ? defaultFontSize += vm.config.fontAdjust.incrementRate : defaultFontSize -= vm.config.fontAdjust.incrementRate;\n                $html.setAttribute('style', 'font-size: ' + defaultFontSize + 'px;');\n            }\n        }\n\n        function increaseFontSize() {\n            _adjustFontSize('+');\n        }\n\n        function decreaseFontSize() {\n            _adjustFontSize('-');\n        }\n\n        function setContrast(config) {\n            var $body = document.querySelector('body');\n\n            _toggleClass('body', config.contrast.class);\n\n            localStorage.setItem('accessibility-contrast', $body.classList.contains(config.contrast.class));\n        }\n    }\n})();\n"]}